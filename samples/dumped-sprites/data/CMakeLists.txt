set( dumpFilename "dump.ppumem" )

# These files are generated by ppu-dump-sprite-extractor.py
set( outputs
    ${dumpFilename}-metasprites.inc
    ${dumpFilename}-palette.pal
    ${dumpFilename}-tiles.chr
)

# Custom command to process the PPU dump.
add_custom_command(
    OUTPUT
        ${outputs}
    COMMAND
        ${__ngin_python} ${__ngin_rootDir}/extras/ppu-dump-sprite-extractor/ppu-dump-sprite-extractor.py
        ${CMAKE_CURRENT_SOURCE_DIR}/${dumpFilename}
        ${CMAKE_CURRENT_BINARY_DIR}/${dumpFilename}
    DEPENDS
        ${CMAKE_CURRENT_SOURCE_DIR}/${dumpFilename}
        ${__ngin_rootDir}/extras/ppu-dump-sprite-extractor/ppu-dump-sprite-extractor.py
    COMMENT
        "Extracting sprites from ${dumpFilename}"
    VERBATIM
)

add_custom_target( ngin-sample-dumped-sprites-data
    DEPENDS
        ${outputs}
)
